
//---------------------------------------------------------------------------------------------------
// <auto-generated>
//    This code was generated by T4 template.
//    Changes to this file may cause incorrect behavior and will be lost if the code is regenerated.
// </auto-generated>
//---------------------------------------------------------------------------------------------------

using System;
using System.Collections.Generic;
using System.Reactive;

namespace Nncase.IR;

public partial class ExprCloner<TContext>
{
    /// <inheritdoc />
    protected override Expr VisitLeafCall(Call expr, TContext context)
    {
        return expr.With(
            target: Clone(expr.Target, context),
            arguments: CloneArray(expr.Arguments, context)
        );
    }

    /// <inheritdoc />
    protected override Expr VisitLeafFunction(Function expr, TContext context)
    {
        if (!CanVisitFunctionBody(expr))
        {
            return expr;
        }

        return expr.With(
            parameters: CloneArray(expr.Parameters, context),
            body: Clone(expr.Body, context)
        );
    }

    /// <inheritdoc />
    protected override Expr VisitLeafFusion(Fusion expr, TContext context)
    {
        if (!CanVisitFunctionBody(expr))
        {
            return expr;
        }

        return expr.With(
            parameters: CloneArray(expr.Parameters, context),
            body: Clone(expr.Body, context)
        );
    }

    /// <inheritdoc />
    protected override Expr VisitLeafIf(If expr, TContext context)
    {
        return expr.With(
            condition: Clone(expr.Condition, context),
            then: Clone(expr.Then, context),
            @else: Clone(expr.Else, context)
        );
    }

    /// <inheritdoc />
    protected override Expr VisitLeafMarker(Marker expr, TContext context)
    {
        return expr.With(
            target: Clone(expr.Target, context),
            attribute: Clone(expr.Attribute, context)
        );
    }

    /// <inheritdoc />
    protected override Expr VisitLeafNone(None expr, TContext context)
    {
        return expr.With(
        );
    }

    /// <inheritdoc />
    protected override Expr VisitLeafOp(Op expr, TContext context)
    {
        return expr.With(
        );
    }

    /// <inheritdoc />
    protected override Expr VisitLeafPrimFunctionWrapper(PrimFunctionWrapper expr, TContext context)
    {
        if (!CanVisitFunctionBody(expr))
        {
            return expr;
        }

        return expr.With(
            target: Clone(expr.Target, context)
        );
    }

    /// <inheritdoc />
    protected override Expr VisitLeafTensorConst(TensorConst expr, TContext context)
    {
        return expr.With(
        );
    }

    /// <inheritdoc />
    protected override Expr VisitLeafTuple(IR.Tuple expr, TContext context)
    {
        return expr.With(
            fields: CloneArray(expr.Fields, context)
        );
    }

    /// <inheritdoc />
    protected override Expr VisitLeafTupleConst(TupleConst expr, TContext context)
    {
        return expr.With(
        );
    }

    /// <inheritdoc />
    protected override Expr VisitLeafVar(Var expr, TContext context)
    {
        return expr.With(
        );
    }

    /// <inheritdoc />
    protected override Expr VisitLeafBlock(TIR.Block expr, TContext context)
    {
        return expr.With(
            body: Clone(expr.Body, context),
            initBody: Clone(expr.InitBody, context),
            iterVars: CloneArray(expr.IterVars, context),
            reads: CloneArray(expr.Reads, context),
            writes: CloneArray(expr.Writes, context),
            allocBuffers: CloneArray(expr.AllocBuffers, context),
            predicate: Clone(expr.Predicate, context)
        );
    }

    /// <inheritdoc />
    protected override Expr VisitLeafLogicalBuffer(TIR.LogicalBuffer expr, TContext context)
    {
        return expr.With(
            dimensions: CloneArray(expr.Dimensions, context),
            strides: CloneArray(expr.Strides, context)
        );
    }

    /// <inheritdoc />
    protected override Expr VisitLeafPhysicalBuffer(TIR.PhysicalBuffer expr, TContext context)
    {
        return expr.With(
        );
    }

    /// <inheritdoc />
    protected override Expr VisitLeafBufferLoad(TIR.BufferLoad expr, TContext context)
    {
        return expr.With(
            buffer: Clone(expr.Buffer, context),
            indices: CloneArray(expr.Indices, context)
        );
    }

    /// <inheritdoc />
    protected override Expr VisitLeafBufferRegion(TIR.BufferRegion expr, TContext context)
    {
        return expr.With(
            buffer: Clone(expr.Buffer, context),
            region: CloneArray(expr.Region, context)
        );
    }

    /// <inheritdoc />
    protected override Expr VisitLeafBufferStore(TIR.BufferStore expr, TContext context)
    {
        return expr.With(
            buffer: Clone(expr.Buffer, context),
            indices: CloneArray(expr.Indices, context),
            value: Clone(expr.Value, context)
        );
    }

    /// <inheritdoc />
    protected override Expr VisitLeafFor(TIR.For expr, TContext context)
    {
        return expr.With(
            loopVar: Clone(expr.LoopVar, context),
            domain: Clone(expr.Domain, context),
            body: Clone(expr.Body, context)
        );
    }

    /// <inheritdoc />
    protected override Expr VisitLeafIfThenElse(TIR.IfThenElse expr, TContext context)
    {
        return expr.With(
            condition: Clone(expr.Condition, context),
            then: Clone(expr.Then, context),
            @else: Clone(expr.Else, context)
        );
    }

    /// <inheritdoc />
    protected override Expr VisitLeafLet(TIR.Let expr, TContext context)
    {
        return expr.With(
            var: Clone(expr.Var, context),
            expression: Clone(expr.Expression, context),
            body: Clone(expr.Body, context)
        );
    }

    /// <inheritdoc />
    protected override Expr VisitLeafPrimFunction(TIR.PrimFunction expr, TContext context)
    {
        if (!CanVisitFunctionBody(expr))
        {
            return expr;
        }

        return expr.With(
            parameters: CloneArray(expr.Parameters, context),
            body: Clone(expr.Body, context)
        );
    }

    /// <inheritdoc />
    protected override Expr VisitLeafSequential(TIR.Sequential expr, TContext context)
    {
        return expr.With(
            fields: CloneArray(expr.Fields, context)
        );
    }

    /// <inheritdoc />
    protected override Expr VisitLeafRange(TIR.Range expr, TContext context)
    {
        return expr.With(
            start: Clone(expr.Start, context),
            stop: Clone(expr.Stop, context),
            step: Clone(expr.Step, context)
        );
    }

    /// <inheritdoc />
    protected override Expr VisitLeafIterVar(TIR.IterVar expr, TContext context)
    {
        return expr.With(
            value: Clone(expr.Value, context),
            dom: Clone(expr.Dom, context)
        );
    }

}
