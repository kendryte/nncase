# This file is generated by Nncase CPU module builder at @Html.Raw(DateTimeOffset.Now).

cmake_minimum_required(VERSION 3.15)
project(nncase_cpu_module)

if (MSVC)
    add_definitions(/D_SILENCE_ALL_CXX17_DEPRECATION_WARNINGS /D_CRT_SECURE_NO_WARNINGS /DNOMINMAX /DUNICODE /D_UNICODE)
    add_compile_options(/utf-8 /wd4200 /Oi)
    add_compile_options(/arch:AVX /fp:fast)
endif()

add_library(nncase_cpu_module SHARED ""main.cpp"")
target_compile_features(nncase_cpu_module PUBLIC cxx_std_20)

if (MSVC)
    set_target_properties(nncase_cpu_module PROPERTIES LINK_FLAGS /SUBSYSTEM:CONSOLE)
    target_link_options(nncase_cpu_module PUBLIC /NODEFAULTLIB)
    target_link_libraries(nncase_cpu_module PRIVATE ucrt libvcruntime libcmt)
    set_property(TARGET nncase_cpu_module PROPERTY
        MSVC_RUNTIME_LIBRARY "MultiThreaded$<$<CONFIG:Debug>:Debug>")
endif()
